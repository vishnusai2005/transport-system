<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Transport Hub - University Transportation System</title>
    <link rel="stylesheet" href="index.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <!-- Login Screen -->
    <div id="loginScreen" class="screen active">
        <div class="login-container">
            <div class="login-header">
                <h1>AI Transport Hub</h1>
                <p>Smart Transportation for University Students</p>
            </div>
            
            <div class="role-selection">
                <h2>Select Your Role</h2>
                <div class="role-buttons">
                    <button class="btn btn--primary role-btn" data-role="student">
                        <div class="role-icon">üéì</div>
                        <span>Student</span>
                    </button>
                    <button class="btn btn--primary role-btn" data-role="driver">
                        <div class="role-icon">üöó</div>
                        <span>Driver</span>
                    </button>
                    <button class="btn btn--primary role-btn" data-role="admin">
                        <div class="role-icon">‚öôÔ∏è</div>
                        <span>Admin</span>
                    </button>
                </div>
            </div>

            <div class="login-form-container hidden">
                <form id="loginForm" class="login-form">
                    <div class="form-group">
                        <label for="username" class="form-label">Username</label>
                        <input type="text" id="username" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="password" class="form-label">Password</label>
                        <input type="password" id="password" class="form-control" required>
                    </div>
                    <button type="submit" class="btn btn--primary btn--full-width">Login</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Student Dashboard -->
    <div id="studentDashboard" class="screen">
        <header class="dashboard-header">
            <div class="header-content">
                <h1>Student Dashboard</h1>
                <div class="header-actions">
                    <button class="btn btn--outline emergency-btn" onclick="showEmergency()">üö® Emergency</button>
                    <button class="btn btn--secondary" onclick="logout()">Logout</button>
                </div>
            </div>
        </header>

        <div class="dashboard-container">
            <div class="dashboard-grid">
                <!-- Quick Actions -->
                <div class="card quick-actions">
                    <div class="card__body">
                        <h3>Quick Actions</h3>
                        <div class="action-buttons">
                            <button class="btn btn--primary" onclick="showTransportAvailability()">Check Transport</button>
                            <button class="btn btn--primary" onclick="showDistanceCalculator()">Distance Calculator</button>
                            <button class="btn btn--primary" onclick="showHolidayPolls()">Holiday Travel</button>
                            <button class="btn btn--primary" onclick="showLiveMap()">Live Map</button>
                        </div>
                    </div>
                </div>

                <!-- AI Recommendations -->
                <div class="card ai-recommendations">
                    <div class="card__body">
                        <h3>AI Recommendations</h3>
                        <div class="recommendation-item">
                            <span class="status status--success">Best Time</span>
                            <p>Travel at 2:30 PM for 20% less wait time</p>
                        </div>
                        <div class="recommendation-item">
                            <span class="status status--warning">Surge Alert</span>
                            <p>High demand expected during College Fest (Sep 15)</p>
                        </div>
                    </div>
                </div>

                <!-- Live Transport Status -->
                <div class="card transport-status">
                    <div class="card__body">
                        <h3>Live Transport Status</h3>
                        <div class="transport-location">
                            <h4>MBU Main Gate</h4>
                            <div class="transport-counts">
                                <span class="transport-item">üöê Autos: <strong id="autoCount">8</strong></span>
                                <span class="transport-item">üöå Buses: <strong id="busCount">3</strong></span>
                            </div>
                            <p class="wait-time">Wait time: <span id="waitTime">5 minutes</span></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Driver Dashboard -->
    <div id="driverDashboard" class="screen">
        <header class="dashboard-header">
            <div class="header-content">
                <h1>Driver Dashboard</h1>
                <div class="header-actions">
                    <button class="btn btn--outline emergency-btn" onclick="showEmergency()">üö® Emergency</button>
                    <button class="btn btn--secondary" onclick="logout()">Logout</button>
                </div>
            </div>
        </header>

        <div class="dashboard-container">
            <div class="dashboard-grid">
                <!-- Driver Stats -->
                <div class="card driver-stats">
                    <div class="card__body">
                        <h3>Performance Stats</h3>
                        <div class="stats-grid">
                            <div class="stat-item">
                                <span class="stat-value" id="driverRating">4.2</span>
                                <span class="stat-label">Rating</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-value" id="recentTrips">15</span>
                                <span class="stat-label">Recent Trips</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-value" id="performanceScore">85</span>
                                <span class="stat-label">Score</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- AI Incentives -->
                <div class="card ai-incentives">
                    <div class="card__body">
                        <h3>AI Incentive Recommendations</h3>
                        <div class="incentive-item">
                            <div class="incentive-header">
                                <span class="status status--success">Active Bonus</span>
                                <span class="bonus-amount">+‚Çπ50</span>
                            </div>
                            <p>Complete 5 rides during 2-4 PM low-demand period</p>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 60%"></div>
                            </div>
                            <span class="progress-text">3/5 completed</span>
                        </div>
                    </div>
                </div>

                <!-- Live Map for Drivers -->
                <div class="card driver-map">
                    <div class="card__body">
                        <h3>Your Location</h3>
                        <div id="driverMap" style="height: 200px; position: relative;"></div>
                        <div class="map-controls">
                            <button class="btn btn--sm btn--primary">Update Location</button>
                            <span class="status--success">Available</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Admin Dashboard -->
    <div id="adminDashboard" class="screen">
        <header class="dashboard-header">
            <div class="header-content">
                <h1>Admin Dashboard</h1>
                <div class="header-actions">
                    <button class="btn btn--outline emergency-btn" onclick="showEmergency()">üö® Emergency</button>
                    <button class="btn btn--secondary" onclick="logout()">Logout</button>
                </div>
            </div>
        </header>

        <div class="dashboard-container">
            <div class="dashboard-grid">
                <!-- System Overview -->
                <div class="card system-overview">
                    <div class="card__body">
                        <h3>System Overview</h3>
                        <div class="overview-stats">
                            <div class="overview-item">
                                <span class="overview-number">1,247</span>
                                <span class="overview-label">Active Students</span>
                            </div>
                            <div class="overview-item">
                                <span class="overview-number">85</span>
                                <span class="overview-label">Active Drivers</span>
                            </div>
                            <div class="overview-item">
                                <span class="overview-number">156</span>
                                <span class="overview-label">Rides Today</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Performance Chart -->
                <div class="card performance-chart">
                    <div class="card__body">
                        <h3>Daily Performance</h3>
                        <div style="height: 200px; position: relative;">
                            <canvas id="performanceChart"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Event Predictions -->
                <div class="card event-predictions">
                    <div class="card__body">
                        <h3>AI Event Predictions</h3>
                        <div class="event-item">
                            <div class="event-header">
                                <strong>College Fest</strong>
                                <span class="status status--error">High Impact</span>
                            </div>
                            <p>Sep 15, 2:00 PM ‚Ä¢ Expected: 1,500 participants</p>
                            <p>Surge Multiplier: <strong>2.1x</strong></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Distance Calculator Modal -->
    <div id="distanceModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Distance Calculator</h3>
                <button class="modal-close" onclick="closeModal('distanceModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="fromLocation" class="form-label">From</label>
                    <select id="fromLocation" class="form-control">
                        <option value="">Select starting point</option>
                        <option value="MBU Main Gate">MBU Main Gate</option>
                        <option value="Boys Hostel">Boys Hostel</option>
                        <option value="Tirupati Railway Station">Tirupati Railway Station</option>
                        <option value="City Center Mall">City Center Mall</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="toLocation" class="form-label">To</label>
                    <select id="toLocation" class="form-control">
                        <option value="">Select destination</option>
                        <option value="MBU Main Gate">MBU Main Gate</option>
                        <option value="Boys Hostel">Boys Hostel</option>
                        <option value="Tirupati Railway Station">Tirupati Railway Station</option>
                        <option value="City Center Mall">City Center Mall</option>
                        <option value="Tirupati Bus Stand">Tirupati Bus Stand</option>
                    </select>
                </div>
                <button class="btn btn--primary btn--full-width" onclick="calculateDistance()">Calculate Distance</button>
                <div id="distanceResult" class="distance-result hidden">
                    <h4>Route Information</h4>
                    <p><strong>Distance:</strong> <span id="routeDistance">-</span> km</p>
                    <p><strong>Estimated Time:</strong> <span id="routeTime">-</span> minutes</p>
                    <p><strong>Estimated Fare:</strong> ‚Çπ<span id="routeFare">-</span></p>
                </div>
            </div>
        </div>
    </div>

    <!-- Transport Availability Modal -->
    <div id="transportModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Live Transport Availability</h3>
                <button class="modal-close" onclick="closeModal('transportModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div id="transportLocations"></div>
            </div>
        </div>
    </div>

    <!-- Holiday Polls Modal -->
    <div id="holidayModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Holiday Travel Coordination</h3>
                <button class="modal-close" onclick="closeModal('holidayModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="poll-item">
                    <h4>Chennai Trip</h4>
                    <div class="poll-details">
                        <p><strong>Date:</strong> Oct 2-5, 2025</p>
                        <p><strong>Departure:</strong> 8:00 AM from MBU Main Gate</p>
                        <p><strong>Participants:</strong> <span class="participant-count">25</span>/30</p>
                        <p><strong>Cost per person:</strong> ‚Çπ1,500</p>
                    </div>
                    <div class="poll-actions">
                        <button class="btn btn--primary" onclick="joinTrip()">Join Trip</button>
                        <button class="btn btn--outline" onclick="voteTime()">Vote for Time</button>
                    </div>
                    <div class="poll-status">
                        <span class="status status--success">Open for Registration</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Live Map Modal -->
    <div id="mapModal" class="modal hidden">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h3>Live Vehicle Tracking</h3>
                <button class="modal-close" onclick="closeModal('mapModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div id="liveMap" style="height: 400px; position: relative;"></div>
                <div class="map-legend">
                    <div class="legend-item">
                        <span class="legend-marker bus"></span>
                        <span>Buses</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-marker auto"></span>
                        <span>Autos</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-marker location"></span>
                        <span>Key Locations</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Emergency Modal -->
    <div id="emergencyModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header emergency-header">
                <h3>üö® Emergency Services</h3>
                <button class="modal-close" onclick="closeModal('emergencyModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="emergency-warning">
                    <p><strong>In case of emergency, call immediately!</strong></p>
                </div>
                <div id="emergencyServices"></div>
                <div class="sos-section">
                    <button class="btn btn--lg btn--full-width emergency-sos" onclick="triggerSOS()">
                        üÜò EMERGENCY SOS
                    </button>
                    <p class="sos-description">This will alert authorities and share your location</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay hidden">
        <div class="loading-spinner"></div>
        <p>Loading...</p>
    </div>

    <script src="index.js"></script>
</body>
</html>
